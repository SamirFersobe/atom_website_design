"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * Resolves when the service worker has been installed.
 */
async function waitForServiceWorker() {
    if (!navigator.serviceWorker || !navigator.serviceWorker.ready) {
        throw new Error('service worker not supported');
    }
    await navigator.serviceWorker.ready;
    if (navigator.serviceWorker.controller) {
        return navigator.serviceWorker.controller;
    }
    else {
        return new Promise((resolve, reject) => {
            navigator.serviceWorker.addEventListener('controllerchange', () => {
                if (navigator.serviceWorker.controller) {
                    resolve(navigator.serviceWorker.controller);
                }
                else {
                    reject(new Error('service worker not supported'));
                }
            });
        });
    }
}
exports.default = waitForServiceWorker;
