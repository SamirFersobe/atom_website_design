"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * This middleware adds getHeaders(), getHeader(name), setHeader(name, value), and removeHeader(name) to Express's
 * request object, making it compatible with the request object we provide in serverless.
 * See lambda/reqResMapper.ts
 * @param request
 * @param _response
 * @param next
 */
const serverlessCompatibilityMiddleware = (request, _response, next) => {
    // @ts-ignore
    request.getHeader = (name) => {
        return request.headers[name.toLowerCase()];
    };
    // @ts-ignore
    request.getHeaders = () => {
        return request.headers;
    };
    // @ts-ignore
    request.setHeader = (name, value) => {
        request.headers[name.toLowerCase()] = value;
    };
    // @ts-ignore
    request.removeHeader = (name) => {
        delete request.headers[name.toLowerCase()];
    };
    next();
};
exports.default = serverlessCompatibilityMiddleware;
