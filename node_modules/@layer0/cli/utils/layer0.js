'use strict';

const fse = require('fs-extra');

const path = require('path');

const layer0VersionPath = absoluteNextDistDir => path.join(absoluteNextDistDir, '.layer0', 'LAYER0_VERSION');

exports.checkProjectBuilt = async absoluteNextDistDir => {
  return fse.pathExists(layer0VersionPath(absoluteNextDistDir));
};

exports.readLayer0Version = async absoluteNextDistDir => {
  return (await fse.readFile(layer0VersionPath(absoluteNextDistDir), 'utf8')).trim().replace(/\+.*/, ''); // remove the suffix appended by yalc
};