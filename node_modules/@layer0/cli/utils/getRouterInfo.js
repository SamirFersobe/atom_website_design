"use strict";

const path = require('path');

const fse = require('fs-extra');

const {
  checkProjectBuilt
} = require('./layer0');

module.exports = async function getRouterInfo(absolutePath) {
  if (!(await checkProjectBuilt(absolutePath))) {
    throw new Error('Please build your layer0 project before deploying to cloud!');
  }

  const routerInfoPath = path.join(absolutePath, '.layer0', 'routerInfo.json');

  if (fse.existsSync(routerInfoPath)) {
    return fse.readFileSync(routerInfoPath, 'utf8');
  } else {
    return null;
  }
};