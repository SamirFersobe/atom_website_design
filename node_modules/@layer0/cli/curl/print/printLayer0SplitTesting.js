"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = printLayer0SplitTesting;

var _chalk = require("chalk");

var _logo = _interopRequireDefault(require("../../utils/logo"));

var _interpolate = _interopRequireDefault(require("../interpolate"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// interpolate with gray color default
const iGray = tpl => (0, _interpolate.default)((0, _chalk.gray)(tpl));

function printLayer0SplitTesting(curlResponse, {
  logger,
  internalArgs
}) {
  if (!internalArgs.spl) {
    return;
  }

  const cookies = curlResponse.lastHeaderGroup().cookies;
  const layer0Destination = cookies.findByName('layer0_destination');
  const layer0Bucket = cookies.findByName('layer0_bucket');

  if (!layer0Destination || !layer0Bucket) {
    return;
  }

  logger.info((0, _chalk.cyan)(`${_logo.default} Split Testing`));
  logger.info(iGray('  Destination         {v}')({
    v: (0, _chalk.cyan)(layer0Destination.value)
  }));
  logger.info(iGray('  Bucket              {v}')({
    v: (0, _chalk.cyan)(layer0Bucket.value)
  }));
  logger.info('');
}

module.exports = exports.default;